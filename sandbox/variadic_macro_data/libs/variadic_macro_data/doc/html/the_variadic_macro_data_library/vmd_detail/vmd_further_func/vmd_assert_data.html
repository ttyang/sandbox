<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Asserting Boost PP data types</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.0">
<link rel="home" href="../../../index.html" title="Chapter&#160;1.&#160;The Variadic Macro Data Library 1.5">
<link rel="up" href="../vmd_further_func.html" title="Further functionality">
<link rel="prev" href="vmd_test_parens.html" title="Testing and removing parens">
<link rel="next" href="vmd_internal_macros.html" title="Controlling internal usage">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="vmd_test_parens.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../vmd_further_func.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="vmd_internal_macros.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="the_variadic_macro_data_library.vmd_detail.vmd_further_func.vmd_assert_data"></a><a class="link" href="vmd_assert_data.html" title="Asserting Boost PP data types">Asserting
        Boost PP data types</a>
</h4></div></div></div>
<p>
          There is no way to determine whether a macro parameter is a given Boost
          PP data type. But one can come close to this functionality using variadic
          macros and the test for emptiness in the VMD library which the BOOST_VMD_IS_EMPTY
          macro gives. Therefore I have developed four macros, for each of the four
          Boost PP data types, which will produce a compiler error if a parameter
          is not a given data type, else will output nothing. These macros are:
        </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
              <code class="computeroutput"><a class="link" href="../../../BOOST_VMD_ASSERT_IS_ARRAY.html" title="Macro BOOST_VMD_ASSERT_IS_ARRAY">BOOST_VMD_ASSERT_IS_ARRAY</a></code>(param),
              asserts that 'param' is a Boost PP array
            </li>
<li class="listitem">
              <code class="computeroutput"><a class="link" href="../../../BOOST_VMD_ASSERT_IS_LIST.html" title="Macro BOOST_VMD_ASSERT_IS_LIST">BOOST_VMD_ASSERT_IS_LIST</a></code>(param),
              asserts that 'param' is a Boost PP list
            </li>
<li class="listitem">
              <code class="computeroutput"><a class="link" href="../../../BOOST_VMD_ASSERT_IS_SEQ.html" title="Macro BOOST_VMD_ASSERT_IS_SEQ">BOOST_VMD_ASSERT_IS_SEQ</a></code>(param),
              asserts that 'param' is a Boost PP seq
            </li>
<li class="listitem">
              <code class="computeroutput"><a class="link" href="../../../BOOST_VMD_ASSERT_IS_TUPLE.html" title="Macro BOOST_VMD_ASSERT_IS_TUPLE">BOOST_VMD_ASSERT_IS_TUPLE</a></code>(param),
              asserts that 'param' is a Boost PP tuple
            </li>
</ol></div>
<p>
          Each of these act like a C++ assert-like macro. They do nothing if the
          'param' is of the known type, else produce a compiler error. Furthermore
          these macros, like 'assert-like macros, only check their 'param' in debug
          mode. This, however, can be overridden by the BOOST_VMD_ASSERT_DATA macro.
          If it is defined and set to 1, the macros will always check their 'param',
          otherwise if it is set to 0 the 'param' is never checked.
        </p>
<p>
          The assert macros can be used in code to test whether a 'param' is of the
          expected Boost PP data type. It is not possible to create equivalent macros
          which return 1 when the 'param' is of the correct type, else return 0,
          because of the assert macros' necessary reliance on BOOST_VMD_IS_EMPTY,
          which even in the best of conditions is slightly flawed. However the flaw
          in BOOST_VMD_IS_EMPTY, where a function-like macro name could produce a
          compiler error, is made use of in the assert macros so that the compiler
          error produced in that case will only occur when the assert macro verifies
          that its 'param' is not the Boost PP data type being checked. Still there
          is the very slight flaw in the assert macros where its reliance on BOOST_VMD_IS_EMPTY
          could run into input being checked where a function-like macro name will
          produce the incorrect result from the BOOST_VMD_IS_EMPTY macro. However
          this flaw is thought to be so slight, and an end-user's chance of inputting
          such data so minimal, that it was felt that such assert-like macros would
          be beneficial to macro programmers using Boost PP and VMD.
        </p>
<p>
          Another point to be made is that Boost PP array and list are also tuples.
          So passing an array or list to BOOST_VMD_ASSERT_IS_TUPLE will assert that
          either is a valid tuple by not producing a compiler error.
        </p>
<p>
          A final point concerns using the assert macros with Visual C++. There is
          no way which I have been able to discover to produce a compiler error from
          within a macro using Visual C++ without producing invalid C++ output to
          trigger the error. Because of this the promise to produce no output in
          case of error from the assert macros must be amended for Visual C++. The
          compiler error when using Visual C++, and an assert macro fails, could
          be masked by using one of the assert macros in a situation where no output
          is generated by an enclosing macro.
        </p>
<p>
          Individual header files can be used for each of the assert macros instead
          of including the general header file 'vmd.hpp'. The individual header files
          are:
        </p>
<p>
          'vmd_assert_is_array.hpp' for the BOOST_VMD_ASSERT_IS_ARRAY macro 'vmd_assert_is_list.hpp'
          for the BOOST_VMD_ASSERT_IS_LIST macro 'vmd_assert_is_seq.hpp' for the
          BOOST_VMD_ASSERT_IS_SEQ macro 'vmd_assert_is_tuple.hpp' for the BOOST_VMD_ASSERT_IS_TUPLE
          macro.
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2010, 2011 Tropic Software East Inc</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="vmd_test_parens.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../vmd_further_func.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="vmd_internal_macros.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
