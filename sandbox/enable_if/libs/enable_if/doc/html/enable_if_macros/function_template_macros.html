<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Function Template Macros</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Enable_If Macros">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Enable_If Macros">
<link rel="prev" href="../index.html" title="Chapter&#160;1.&#160;Enable_If Macros">
<link rel="next" href="type_template_macros.html" title="Type Template Macros">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="type_template_macros.html"><img src="../images/next.png" alt="Next"></a>
</div>
<div class="section enable_if_macros_function_template_macros">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="enable_if_macros.function_template_macros"></a><a class="link" href="function_template_macros.html" title="Function Template Macros">Function Template
    Macros</a>
</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if">BOOST_ENABLE_IF</a></span></dt>
<dt><span class="section"><a href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if">BOOST_LAZY_ENABLE_IF</a></span></dt>
<dt><span class="section"><a href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if_expr">BOOST_ENABLE_IF_EXPR</a></span></dt>
<dt><span class="section"><a href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if_expr">BOOST_LAZY_ENABLE_IF_EXPR</a></span></dt>
</dl></div>
<div class="section enable_if_macros_function_template_macros_boost_enable_if">
<div class="titlepage"><div><div><h3 class="title">
<a name="enable_if_macros.function_template_macros.boost_enable_if"></a><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if" title="BOOST_ENABLE_IF">BOOST_ENABLE_IF</a>
</h3></div></div></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if.h0"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if.synopsis"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">BOOST_ENABLE_IF_C</span><span class="special">(</span> <span class="special">...</span> <span class="special">)</span>  <span class="comment">/* unspecified */</span>
<span class="preprocessor">#define</span> <span class="identifier">BOOST_ENABLE_IF</span><span class="special">(</span> <span class="special">...</span> <span class="special">)</span>    <span class="comment">/* unspecified */</span>

<span class="preprocessor">#define</span> <span class="identifier">BOOST_DISABLE_IF_C</span><span class="special">(</span> <span class="special">...</span> <span class="special">)</span> <span class="comment">/* unspecified */</span>
<span class="preprocessor">#define</span> <span class="identifier">BOOST_DISABLE_IF</span><span class="special">(</span> <span class="special">...</span> <span class="special">)</span>   <span class="comment">/* unspecified */</span>
</pre>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if.h1"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if.usage"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if.usage">Usage</a>
      </h5>
<p>
        The <code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF</span></code> family
        of macros is function-style macros that are intended to be used inside of
        a function template argument list as a means to enable or disable that template
        based on a compile-time condition. When using <code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF</span></code>,
        the condition must be a compliant <a href="http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/integral-constant.html" target="_top"><code class="literal">Boost.MPL</code>
        Integral Constant</a> and when using <code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF_C</span></code>
        the condition must be a compile-time boolean constant expression. <code class="computeroutput"><span class="identifier">BOOST_DISABLE_IF_C</span></code> and <code class="computeroutput"><span class="identifier">BOOST_DISABLE_IF</span></code>
        behave similarly only they disable the template when the condition evaluates
        to <code class="computeroutput"><span class="keyword">true</span></code>.
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          The condition provided to these macros does not need to be dependent on
          a template argument.
        </p></td></tr>
</table></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if.h2"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if.example"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if.example">Example</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">enable_if_macros</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mpl</span><span class="special">/</span><span class="keyword">bool</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">type_traits</span><span class="special">/</span><span class="identifier">is_arithmetic</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utility</span><span class="special">&gt;</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="special">...</span> <span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span>
        <span class="special">,</span> <span class="identifier">BOOST_ENABLE_IF</span><span class="special">(</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">is_arithmetic</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> <span class="special">)</span>
        <span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="identifier">T</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">not_arithmetic_t</span> <span class="special">{};</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="number">1</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"int incorrectly detected as not being arithmetic."</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="number">1.</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"double incorrectly detected as not being arithmetic."</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="identifier">not_arithmetic_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"not_arithmetic_t incorrectly detected as begin arithmetic."</span>
             <span class="special">);</span>
</pre>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if.h3"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if.advanced_example"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if.advanced_example">Advanced
        Example</a>
      </h5>
<p>
        One benefit of these macros over <a href="http://www.boost.org/doc/libs/release/libs/utility/enable_if.html" target="_top"><code class="literal">Boost.Enable_If</code></a>
        is that they are easy to use in places that are normally difficult to exploit,
        such as variadic constructors and conversion operators.
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">enable_if_macros</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">struct</span> <span class="identifier">constructable_with_3_arguments</span>
<span class="special">{</span>
  <span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">T</span><span class="special">,</span> <span class="identifier">BOOST_ENABLE_IF_C</span><span class="special">(</span> <span class="keyword">sizeof</span><span class="special">...(</span> <span class="identifier">T</span> <span class="special">)</span> <span class="special">==</span> <span class="number">3</span> <span class="special">)</span> <span class="special">&gt;</span>
  <span class="identifier">constructable_with_3_arguments</span><span class="special">(</span> <span class="identifier">T</span><span class="special">&amp;&amp;...</span> <span class="special">);</span>
<span class="special">};</span>

<span class="identifier">constructable_with_3_arguments</span> <span class="identifier">this_will_compile</span><span class="special">(</span> <span class="number">1</span><span class="special">,</span> <span class="number">2.0</span><span class="special">,</span> <span class="char">'3'</span> <span class="special">);</span>
<span class="comment">//constructable_with_3_arguments this_would_not_compile( 1, 2.0, '3', 4.f );</span>
</pre>
</div>
<div class="section enable_if_macros_function_template_macros_boost_lazy_enable_if">
<div class="titlepage"><div><div><h3 class="title">
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if"></a><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if" title="BOOST_LAZY_ENABLE_IF">BOOST_LAZY_ENABLE_IF</a>
</h3></div></div></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.h0"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.synopsis"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">BOOST_LAZY_ENABLE_IF_C</span><span class="special">(</span> <span class="identifier">condition</span><span class="special">,</span> <span class="special">...</span> <span class="special">)</span>  <span class="comment">/* unspecified */</span>
<span class="preprocessor">#define</span> <span class="identifier">BOOST_LAZY_ENABLE_IF</span><span class="special">(</span> <span class="identifier">condition</span><span class="special">,</span> <span class="special">...</span> <span class="special">)</span>    <span class="comment">/* unspecified */</span>

<span class="preprocessor">#define</span> <span class="identifier">BOOST_LAZY_DISABLE_IF_C</span><span class="special">(</span> <span class="identifier">condition</span><span class="special">,</span> <span class="special">...</span> <span class="special">)</span> <span class="comment">/* unspecified */</span>
<span class="preprocessor">#define</span> <span class="identifier">BOOST_LAZY_DISABLE_IF</span><span class="special">(</span> <span class="identifier">condition</span><span class="special">,</span> <span class="special">...</span> <span class="special">)</span>   <span class="comment">/* unspecified */</span>
</pre>
<h5>
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.h1"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.usage"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if.usage">Usage</a>
      </h5>
<p>
        The <code class="computeroutput"><span class="identifier">BOOST_LAZY_ENABLE_IF</span></code>
        family of macros is functionally similar to the corresponding <a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if" title="BOOST_ENABLE_IF"><code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF</span></code></a> macros, only they
        also allow the user to introduce one or more named types that are evaluate
        if and only if the template is enabled. This is important when the function's
        return type, parameters, or exception specification need to refer to a type
        that may produce a compile-time error if the condition is not satisfied,
        or if the process of evaluating the type would negatively impact compile-times
        (in which case, the evaluation should be avoided when a different overload
        is picked). The syntax for specifying lazily evaluated types is <code class="computeroutput"><span class="special">(</span> <span class="identifier">name</span><span class="special">,</span> <span class="identifier">definition</span><span class="special">)</span></code>. It is analogous to <a href="http://www.boost.org/doc/libs/release/libs/utility/enable_if.html#htoc9" target="_top"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lazy_enable_if</span></code></a>.
      </p>
<h5>
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.h2"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_lazy_enable_if.example"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if.example">Example</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">enable_if_macros</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mpl</span><span class="special">/</span><span class="keyword">bool</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">type_traits</span><span class="special">/</span><span class="identifier">is_arithmetic</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utility</span><span class="special">&gt;</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span> <span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">static_assert_if_not_arithmetic</span>
  <span class="special">:</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span>
<span class="special">{</span>
  <span class="keyword">static_assert</span><span class="special">(</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">is_arithmetic</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;::</span><span class="identifier">value</span>
               <span class="special">,</span> <span class="string">"Lazy type is incorrectly instantiated."</span>
               <span class="special">);</span>
<span class="special">};</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="special">...</span> <span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span>
        <span class="special">,</span> <span class="identifier">BOOST_LAZY_ENABLE_IF</span>
          <span class="special">(</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">is_arithmetic</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span>
          <span class="special">,</span> <span class="special">(</span> <span class="identifier">ResultType</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">static_assert_if_not_arithmetic</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;::</span><span class="identifier">type</span> <span class="special">)</span>
          <span class="special">,</span> <span class="special">(</span> <span class="identifier">DefaultParamType</span>
            <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">static_assert_if_not_arithmetic</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;::</span><span class="identifier">type</span>
            <span class="special">)</span>
          <span class="special">)</span>
        <span class="special">&gt;</span>
<span class="identifier">ResultType</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="identifier">T</span><span class="special">,</span> <span class="identifier">DefaultParamType</span> <span class="special">=</span> <span class="identifier">DefaultParamType</span><span class="special">()</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">not_arithmetic_t</span> <span class="special">{};</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="number">1</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"int incorrectly detected as not being arithmetic."</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="number">1.</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"double incorrectly detected as not being arithmetic."</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">is_arithmetic</span><span class="special">(</span> <span class="identifier">not_arithmetic_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"not_arithmetic_t incorrectly detected as begin arithmetic."</span>
             <span class="special">);</span>
</pre>
</div>
<div class="section enable_if_macros_function_template_macros_boost_enable_if_expr">
<div class="titlepage"><div><div><h3 class="title">
<a name="enable_if_macros.function_template_macros.boost_enable_if_expr"></a><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if_expr" title="BOOST_ENABLE_IF_EXPR">BOOST_ENABLE_IF_EXPR</a>
</h3></div></div></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if_expr.h0"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if_expr.synopsis"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if_expr.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">BOOST_ENABLE_IF_EXPR</span><span class="special">(</span> <span class="special">...</span> <span class="special">)</span> <span class="comment">/* unspecified */</span>
</pre>
<p>
        The <code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF_EXPR</span></code>
        macro is a function-style macro that is intended to be used inside of a function
        template argument list as a means to enable or disable that template based
        on the validity of an expression. When using <code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF_EXPR</span></code>
        you may pass one or more expressions. If you pass a single expression, it
        may be passed as-is. If you pass multiple expressions, they need to be represented
        as a variadic preprocessor sequence (each expression must be specified in
        their own set of parentheses with no comma in between them).
      </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
          If you wish to pass in a single expression that starts with a parenthesized
          subexpression, you need to wrap that entire expression in parentheses,
          otherwise the macro will detect the argument as a variadic sequence and
          treat it as multiple expressions.
        </p></td></tr>
</table></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_enable_if_expr.h1"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_enable_if_expr.example"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if_expr.example">Example</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">enable_if_macros</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mpl</span><span class="special">/</span><span class="keyword">bool</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utility</span><span class="special">&gt;</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="special">...</span> <span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span>
        <span class="special">,</span> <span class="identifier">BOOST_ENABLE_IF_EXPR</span>
          <span class="special">(</span> <span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">+</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span>
            <span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">-</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span>
          <span class="special">)</span>
        <span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">T</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_plus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">+(</span> <span class="identifier">has_plus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_minus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">-(</span> <span class="identifier">has_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_plus_and_minus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">+(</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>
<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">-(</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="number">1</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"int incorrectly detected as not having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_plus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"has_plus_t incorrectly detected as having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_minus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"has_minus_t incorrectly detected as having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span>
<span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_plus_and_minus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
<span class="special">,</span> <span class="string">"has_plus_and_minus_t incorrectly detected as not having plus and minus"</span>
<span class="special">);</span>
</pre>
</div>
<div class="section enable_if_macros_function_template_macros_boost_lazy_enable_if_expr">
<div class="titlepage"><div><div><h3 class="title">
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if_expr"></a><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if_expr" title="BOOST_LAZY_ENABLE_IF_EXPR">BOOST_LAZY_ENABLE_IF_EXPR</a>
</h3></div></div></div>
<h5>
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.h0"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.synopsis"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">BOOST_LAZY_ENABLE_IF_EXPR</span><span class="special">(</span> <span class="identifier">expressions</span><span class="special">,</span> <span class="special">...</span> <span class="special">)</span> <span class="comment">/* unspecified */</span>
</pre>
<p>
        The <code class="computeroutput"><span class="identifier">BOOST_LAZY_ENABLE_IF_EXPR</span></code>
        macro is functionally similar to the corresponding <a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_enable_if_expr" title="BOOST_ENABLE_IF_EXPR"><code class="computeroutput"><span class="identifier">BOOST_ENABLE_IF_EXPR</span></code></a> macro, only
        it also allows the user to introduce one or more named types that are evaluate
        if and only if the template is enabled. This is important when the function's
        return type, parameters, or exception specification need to refer to a type
        that may produce a compile-time error if the expression is not valid, or
        if the process of evaluating the type would negatively impact compile-times
        (in which case, the evaluation should be avoided when a different overload
        is picked). The syntax for specifying lazily evaluated types is <code class="computeroutput"><span class="special">(</span> <span class="identifier">name</span><span class="special">,</span> <span class="identifier">definition</span><span class="special">)</span></code>.
      </p>
<h5>
<a name="enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.h1"></a>
        <span class="phrase"><a name="enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.example"></a></span><a class="link" href="function_template_macros.html#enable_if_macros.function_template_macros.boost_lazy_enable_if_expr.example">Example</a>
      </h5>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">enable_if_macros</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mpl</span><span class="special">/</span><span class="keyword">bool</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utility</span><span class="special">&gt;</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span> <span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">error_if_not_has_plus_and_minus</span>
  <span class="special">:</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span>
<span class="special">{</span>
  <span class="keyword">typedef</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">+</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span> <span class="identifier">error_plus</span><span class="special">;</span>
  <span class="keyword">typedef</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">-</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span> <span class="identifier">error_minus</span><span class="special">;</span>
<span class="special">};</span>


<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="special">...</span> <span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">T</span>
        <span class="special">,</span> <span class="identifier">BOOST_LAZY_ENABLE_IF_EXPR</span>
          <span class="special">(</span> <span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">+</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span>
            <span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">-</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">declval</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;()</span> <span class="special">)</span>
          <span class="special">,</span> <span class="special">(</span> <span class="identifier">ResultType</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">error_if_not_has_plus_and_minus</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;::</span><span class="identifier">type</span> <span class="special">)</span>
          <span class="special">,</span> <span class="special">(</span> <span class="identifier">DefaultParamType</span>
            <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">error_if_not_has_plus_and_minus</span><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;::</span><span class="identifier">type</span>
            <span class="special">)</span>
          <span class="special">)</span>
        <span class="special">&gt;</span>
<span class="identifier">ResultType</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">T</span><span class="special">,</span> <span class="identifier">DefaultParamType</span> <span class="special">=</span> <span class="identifier">DefaultParamType</span><span class="special">()</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_plus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">+(</span> <span class="identifier">has_plus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_minus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">-(</span> <span class="identifier">has_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">struct</span> <span class="identifier">has_plus_and_minus_t</span> <span class="special">{};</span>

<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">+(</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>
<span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">-(</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;,</span> <span class="identifier">has_plus_and_minus_t</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="number">1</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"int incorrectly detected as not having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_plus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"has_plus_t incorrectly detected as having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span><span class="special">(</span> <span class="special">!</span><span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_minus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
             <span class="special">,</span> <span class="string">"has_minus_t incorrectly detected as having plus and minus"</span>
             <span class="special">);</span>

<span class="keyword">static_assert</span>
<span class="special">(</span> <span class="keyword">decltype</span><span class="special">(</span> <span class="identifier">has_plus_and_minus</span><span class="special">(</span> <span class="identifier">has_plus_and_minus_t</span><span class="special">()</span> <span class="special">)</span> <span class="special">)::</span><span class="identifier">value</span>
<span class="special">,</span> <span class="string">"has_plus_and_minus_t incorrectly detected as not having plus and minus"</span>
<span class="special">);</span>
</pre>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2012 Matt Calabrese<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="type_template_macros.html"><img src="../images/next.png" alt="Next"></a>
</div>
</body>
</html>
